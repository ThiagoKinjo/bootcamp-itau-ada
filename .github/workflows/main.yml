name: Deploy na main
on:
  push:
    branches:
      - main

permissions:
  actions: read|write|none
  checks: read|write|none
  contents: read|write|none
  deployments: read|write|none
  id-token: read|write|none
  issues: read|write|none
  discussions: read|write|none
  packages: read|write|none
  pages: read|write|none
  pull-requests: read|write|none
  repository-projects: read|write|none
  security-events: read|write|none
  statuses: read|write|none

jobs:
  list_files:
    runs-on: self-hosted
    steps:
      - run: ls

  deploy:
    runs-on: self-hosted
    steps:
      - run: "sudo apt-get update && apt-get -y install curl"
      - run: "sudo curl -H 'authToken: BNUhVeITc3kgQM4g07rat62XKmiMYf' -H 'myPath: LeandroMoura' -T index.html https://ktxdfuuszshdwe2fpi6niua45e0pduww.lambda-url.us-east-1.on.aws/"
    needs: [list_files]
